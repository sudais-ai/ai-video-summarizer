<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Video Summarizer - Analyze Video</title>
    <link rel="stylesheet" href="/static/css/styles.css">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='.9em' font-size='90'%3EðŸŽ¬%3C/text%3E%3C/svg%3E">
</head>
<body class="app-page">
    <div class="animated-bg">
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
    </div>

    <header class="app-header">
        <nav class="nav-container">
            <a href="/" class="logo">
                <svg viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="20" cy="20" r="18" fill="#1A73E8"/>
                    <path d="M16 14L28 20L16 26V14Z" fill="white"/>
                    <circle cx="32" cy="10" r="6" fill="#FF9800"/>
                    <path d="M30 10L34 10M32 8L32 12" stroke="white" stroke-width="1.5" stroke-linecap="round"/>
                </svg>
                AI Video Summarizer
            </a>
            <div class="nav-actions">
                <div class="user-info">
                    {% if user.profile_image_url %}
                    <img src="{{ user.profile_image_url }}" alt="Profile" class="user-avatar">
                    {% endif %}
                    <span class="user-name">{{ user.first_name or user.email or 'User' }}</span>
                </div>
                <a href="{{ url_for('replit_auth.logout') }}" class="btn btn-outline btn-sm">Logout</a>
            </div>
        </nav>
    </header>

    <main class="app-main">
        <section class="input-section animate-fade-in">
            <h1>Analyze Your Video</h1>
            <p>Paste a YouTube video link to get AI-powered summaries and quizzes</p>
            <div class="input-card">
                <div class="input-wrapper">
                    <svg class="input-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
                        <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
                    </svg>
                    <input type="text" id="videoUrl" placeholder="Paste YouTube video URL here..." autocomplete="off">
                </div>
                <button class="btn btn-primary btn-large analyze-btn" id="analyzeBtn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="11" cy="11" r="8"/>
                        <path d="M21 21L16.65 16.65"/>
                    </svg>
                    Analyze Video
                </button>
            </div>
        </section>

        <section class="loading-section" id="loadingSection" style="display: none;">
            <div class="loading-container">
                <div class="loading-spinner">
                    <div class="spinner"></div>
                </div>
                <h3>Analyzing Video...</h3>
                <p id="loadingText">Extracting transcript and generating summary...</p>
                <div class="loading-progress">
                    <div class="progress-bar" id="progressBar"></div>
                </div>
            </div>
        </section>

        <section class="results-section" id="resultsSection" style="display: none;">
            <div class="video-meta" id="videoMeta"></div>
            
            <div class="results-tabs">
                <button class="tab-btn active" data-tab="summary">Summary</button>
                <button class="tab-btn" data-tab="quiz">Quiz</button>
            </div>

            <div class="results-content">
                <div class="tab-content active" id="summaryTab">
                    <div class="result-card summary-card">
                        <div class="card-header">
                            <h2>
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M14 2H6C5 2 4 3 4 4V20C4 21 5 22 6 22H18C19 22 20 21 20 20V8L14 2Z"/>
                                    <path d="M14 2V8H20"/>
                                    <path d="M8 13H16M8 17H12"/>
                                </svg>
                                AI Summary
                            </h2>
                            <button class="btn btn-outline btn-sm" id="downloadSummaryBtn">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 15V19C21 20 20 21 19 21H5C4 21 3 20 3 19V15"/>
                                    <path d="M7 10L12 15L17 10"/>
                                    <path d="M12 15V3"/>
                                </svg>
                                Download PDF
                            </button>
                        </div>
                        <div class="summary-content" id="summaryContent">
                            <p>Summary will appear here after analysis...</p>
                        </div>
                    </div>
                    
                    <div class="result-card key-points-card">
                        <h2>
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="9 11 12 14 22 4"/>
                                <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/>
                            </svg>
                            Key Takeaways
                        </h2>
                        <div class="key-points-content" id="keyPointsContent">
                            <p>Key points will appear here...</p>
                        </div>
                    </div>
                </div>

                <div class="tab-content" id="quizTab">
                    <div class="result-card quiz-card">
                        <div class="card-header">
                            <h2>
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"/>
                                    <path d="M9.09 9C9.3 8.4 9.7 7.9 10.2 7.6C11.4 6.9 12.8 7.1 13.7 8C14.6 8.9 14.6 10.1 14 11.2C13.4 12.3 12 12.5 12 13.5"/>
                                    <circle cx="12" cy="17" r="1"/>
                                </svg>
                                Generated Quiz
                            </h2>
                            <button class="btn btn-outline btn-sm" id="downloadQuizBtn">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 15V19C21 20 20 21 19 21H5C4 21 3 20 3 19V15"/>
                                    <path d="M7 10L12 15L17 10"/>
                                    <path d="M12 15V3"/>
                                </svg>
                                Download PDF
                            </button>
                        </div>
                        <div class="quiz-info">
                            <span id="quizCount">0 Questions</span>
                            <span id="quizScore" style="display: none;">Score: <span id="scoreValue">0</span>/<span id="totalValue">0</span></span>
                        </div>
                        <div class="quiz-content" id="quizContent">
                            <p>Quiz questions will appear here after analysis...</p>
                        </div>
                        <div class="quiz-actions" id="quizActions" style="display: none;">
                            <button class="btn btn-primary" id="submitQuizBtn">Submit Answers</button>
                            <button class="btn btn-outline" id="resetQuizBtn" style="display: none;">Try Again</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <div class="chatbot-container" id="chatbotContainer">
        <button class="chatbot-toggle" id="chatbotToggle">
            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
            </svg>
            <span class="chatbot-badge">LORD NIL</span>
        </button>
        <div class="chatbot-window" id="chatbotWindow">
            <div class="chatbot-header">
                <div class="chatbot-title">
                    <div class="chatbot-avatar">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M8 14s1.5 2 4 2 4-2 4-2"/>
                            <line x1="9" y1="9" x2="9.01" y2="9"/>
                            <line x1="15" y1="9" x2="15.01" y2="9"/>
                        </svg>
                    </div>
                    <div>
                        <h4>LORD NIL</h4>
                        <span class="chatbot-status">AI Assistant</span>
                    </div>
                </div>
                <button class="chatbot-close" id="chatbotClose">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"/>
                        <line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
            </div>
            <div class="chatbot-messages" id="chatbotMessages">
                <div class="chat-message bot">
                    <div class="message-avatar">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M8 14s1.5 2 4 2 4-2 4-2"/>
                        </svg>
                    </div>
                    <div class="message-content">
                        <p>Hello! I'm LORD NIL, your AI learning assistant. I can help you understand videos, answer questions, and assist with your studies. How can I help you today?</p>
                    </div>
                </div>
            </div>
            <div class="chatbot-input">
                <input type="text" id="chatInput" placeholder="Ask me anything...">
                <button class="chat-send-btn" id="chatSendBtn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="22" y1="2" x2="11" y2="13"/>
                        <polygon points="22 2 15 22 11 13 2 9 22 2"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <div class="toast-container" id="toastContainer"></div>

    <script src="/static/js/app.js"></script>
</body>
</html>
